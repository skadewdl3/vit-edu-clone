---
import SiteLayout from '@layouts/SiteLayout.astro'
import Course from './Course.vapor.vue'
const courseID = Astro.params.course_id

const res = await fetch(
  `${Astro.url.origin}/api/courses/details?courseID=${courseID}`,
  {
    headers: {
      'Content-Type': 'application/json',
    },
  },
)

let teachers = await res.json()
let first_names = teachers[0].result.first_names
let last_names = teachers[0].result.last_names
let prefixes = teachers[0].result.prefixes

let teacherNames = first_names.map((name, index) => {
  return `${prefixes[index] != null ? prefixes[index] + ' ' : ''}${name} ${
    last_names[index]}`
})

export const prerender = false
---

<SiteLayout>
  {courseID}
  <Course teachers={teacherNames} />
</SiteLayout>
